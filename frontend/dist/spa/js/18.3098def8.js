(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[18],{b081:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-10 col-12 offset-md-1 q-mt-md"},[r("q-table",{staticClass:"sticky-header-table",attrs:{"card-class":"bg-grey-1","table-header-class":"bg-grey-1",columns:e.dtHeaders,data:e.collabs,filter:e.search,"filter-method":e.customFilter,pagination:e.pagination,"row-key":"username",loading:e.loading},on:{"update:pagination":function(t){e.pagination=t},"row-dblclick":e.dblClick},scopedSlots:e._u([{key:"top",fn:function(){return[r("q-space"),e.UserService.isAllowed("users:create")?r("q-btn",{attrs:{unelevated:"",label:"Add Collaborator",color:"secondary","no-caps":""},on:{click:function(t){e.cleanCurrentCollab(),e.$refs.createModal.show()}}}):e._e()]},proxy:!0},{key:"top-row",fn:function(t){return[r("q-tr",[r("q-td",{staticStyle:{width:"25%"}},[r("q-input",{attrs:{dense:"",color:"secondary",label:"Search...",clearable:"",outlined:"","bg-color":"white"},model:{value:e.search.username,callback:function(t){e.$set(e.search,"username",t)},expression:"search.username"}})],1),r("q-td",{staticStyle:{width:"25%"}},[r("q-input",{attrs:{dense:"",color:"secondary",label:"Search...",clearable:"",outlined:"","bg-color":"white"},model:{value:e.search.firstname,callback:function(t){e.$set(e.search,"firstname",t)},expression:"search.firstname"}})],1),r("q-td",{staticStyle:{width:"25%"}},[r("q-input",{attrs:{dense:"",color:"secondary",label:"Search...",clearable:"",outlined:"","bg-color":"white"},model:{value:e.search.lastname,callback:function(t){e.$set(e.search,"lastname",t)},expression:"search.lastname"}})],1),r("q-td",{staticStyle:{width:"25%"}},[r("q-select",{attrs:{dense:"",color:"secondary",label:"Search...",clearable:"",options:e.roles,"options-sanitize":"",outlined:"","bg-color":"white"},model:{value:e.search.role,callback:function(t){e.$set(e.search,"role",t)},expression:"search.role"}})],1),r("q-td")],1)]}},{key:"body-cell-action",fn:function(t){return r("q-td",{staticStyle:{width:"1px"}},[e.UserService.isAllowed("users:update")?r("q-btn",{attrs:{size:"sm",flat:"",color:"primary",icon:"fa fa-edit"},on:{click:function(r){e.clone(t.row),e.$refs.editModal.show()}}},[r("q-tooltip",{attrs:{anchor:"bottom middle",self:"center left",delay:500,"content-class":"text-bold"}},[e._v("Edit")])],1):e._e(),e.UserService.isAllowed("users:delete")?r("q-btn",{attrs:{size:"sm",flat:"",color:"negative",icon:"fa fa-trash"},on:{click:function(r){return e.confirmDeleteCollab(t.row)}}},[r("q-tooltip",{attrs:{anchor:"bottom middle",self:"center left",delay:500,"content-class":"text-bold"}},[e._v("Delete")])],1):e._e()],1)}},{key:"bottom",fn:function(t){return[1===e.collabs.length?r("span",[e._v("1 Collaborator")]):r("span",[e._v(e._s(e.collabs.length)+" Collaborators")]),r("q-space"),r("span",[e._v("Results per page:")]),r("q-select",{staticClass:"q-px-md",attrs:{options:e.rowsPerPageOptions,"emit-value":"","map-options":"",dense:"","options-dense":"","options-cover":"",borderless:""},model:{value:e.pagination.rowsPerPage,callback:function(t){e.$set(e.pagination,"rowsPerPage",t)},expression:"pagination.rowsPerPage"}}),r("q-pagination",{attrs:{input:"",max:t.pagesNumber},model:{value:e.pagination.page,callback:function(t){e.$set(e.pagination,"page",t)},expression:"pagination.page"}})]}}])})],1)]),r("q-dialog",{ref:"createModal",attrs:{persistent:""},on:{hide:function(t){return e.cleanErrors()}}},[r("q-card",{staticClass:"bg-grey-1",staticStyle:{width:"800px"}},[r("q-bar",{staticClass:"bg-primary text-white"},[r("div",{staticClass:"q-toolbar-title"},[e._v("\n                Add Collaborator\n            ")]),r("q-space"),r("q-btn",{attrs:{dense:"",flat:"",icon:"close"},on:{click:function(t){return e.$refs.createModal.hide()}}})],1),r("q-card-section",[r("q-input",{staticClass:"col-md-12",attrs:{label:"Username *",autofocus:"",error:!!e.errors.username,"error-message":e.errors.username,"hide-bottom-space":"",outlined:"","bg-color":"white"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.createCollab()}},model:{value:e.currentCollab.username,callback:function(t){e.$set(e.currentCollab,"username",t)},expression:"currentCollab.username"}})],1),r("q-card-section",[r("q-input",{staticClass:"col-md-12",attrs:{label:"Firstname *",error:!!e.errors.firstname,"error-message":e.errors.firstname,"hide-bottom-space":"",outlined:"","bg-color":"white"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.createCollab()}},model:{value:e.currentCollab.firstname,callback:function(t){e.$set(e.currentCollab,"firstname",t)},expression:"currentCollab.firstname"}})],1),r("q-card-section",[r("q-input",{staticClass:"col-md-12",attrs:{label:"Lastname *",error:!!e.errors.lastname,"error-message":e.errors.lastname,"hide-bottom-space":"",outlined:"","bg-color":"white"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.createCollab()}},model:{value:e.currentCollab.lastname,callback:function(t){e.$set(e.currentCollab,"lastname",t)},expression:"currentCollab.lastname"}})],1),r("q-card-section",[r("q-select",{staticClass:"col-md-12",attrs:{label:"Role *",options:e.roles,"options-sanitize":"",outlined:"","bg-color":"white"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.createCollab()}},model:{value:e.currentCollab.role,callback:function(t){e.$set(e.currentCollab,"role",t)},expression:"currentCollab.role"}})],1),r("q-card-section",[r("q-input",{attrs:{label:"Password *",type:"password",error:!!e.errors.password,"error-message":e.errors.password,"hide-bottom-space":"",outlined:"","bg-color":"white"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.createCollab()}},model:{value:e.currentCollab.password,callback:function(t){e.$set(e.currentCollab,"password",t)},expression:"currentCollab.password"}})],1),r("q-separator"),r("q-card-actions",{attrs:{align:"right"}},[r("q-btn",{attrs:{color:"primary",outline:""},on:{click:function(t){return e.$refs.createModal.hide()}}},[e._v("Cancel")]),r("q-btn",{attrs:{color:"secondary",unelevated:""},on:{click:function(t){return e.createCollab()}}},[e._v("Create")])],1)],1)],1),r("q-dialog",{ref:"editModal",attrs:{persistent:""},on:{hide:function(t){return e.cleanErrors()}}},[r("q-card",{staticClass:"bg-grey-1",staticStyle:{width:"800px"}},[r("q-bar",{staticClass:"bg-primary text-white"},[r("div",{staticClass:"q-toolbar-title"},[e._v("\n                Edit Collaborator\n            ")]),r("q-space"),r("q-btn",{attrs:{dense:"",flat:"",icon:"close"},on:{click:function(t){return e.$refs.editModal.hide()}}})],1),r("q-card-section",[r("q-input",{staticClass:"col-md-12",attrs:{label:"Username *",autofocus:"",error:!!e.errors.username,"error-message":e.errors.username,"hide-bottom-space":"",outlined:"","bg-color":"white"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.updateCollab()}},model:{value:e.currentCollab.username,callback:function(t){e.$set(e.currentCollab,"username",t)},expression:"currentCollab.username"}})],1),r("q-card-section",[r("q-input",{staticClass:"col-md-12",attrs:{label:"Firstname *",error:!!e.errors.firstname,"error-message":e.errors.firstname,"hide-bottom-space":"",outlined:"","bg-color":"white"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.updateCollab()}},model:{value:e.currentCollab.firstname,callback:function(t){e.$set(e.currentCollab,"firstname",t)},expression:"currentCollab.firstname"}})],1),r("q-card-section",[r("q-input",{staticClass:"col-md-12",attrs:{label:"Lastname *",error:!!e.errors.lastname,"error-message":e.errors.lastname,"hide-bottom-space":"",outlined:"","bg-color":"white"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.updateCollab()}},model:{value:e.currentCollab.lastname,callback:function(t){e.$set(e.currentCollab,"lastname",t)},expression:"currentCollab.lastname"}})],1),r("q-card-section",[r("q-select",{staticClass:"col-md-12",attrs:{label:"Role *",options:e.roles,"options-sanitize":"",outlined:"","bg-color":"white"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.updateCollab()}},model:{value:e.currentCollab.role,callback:function(t){e.$set(e.currentCollab,"role",t)},expression:"currentCollab.role"}})],1),r("q-card-section",[r("q-input",{attrs:{label:"Password",type:"password",outlined:"","bg-color":"white"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.updateCollab()}},model:{value:e.currentCollab.password,callback:function(t){e.$set(e.currentCollab,"password",t)},expression:"currentCollab.password"}})],1),r("q-separator"),r("q-card-actions",{attrs:{align:"right"}},[r("q-btn",{attrs:{color:"primary",outline:""},on:{click:function(t){return e.$refs.editModal.hide()}}},[e._v("Cancel")]),r("q-btn",{attrs:{color:"secondary",unelevated:""},on:{click:function(t){return e.updateCollab()}}},[e._v("Update")])],1)],1)],1)],1)},o=[],l=r("436b"),s=r("2a19"),n=r("a3d7"),i=r("93d6"),c=r("ed8e"),u=r("6fbe"),d={data:function(){return{UserService:i["a"],collabs:[],loading:!0,dtHeaders:[{name:"username",label:"Username",field:"username",align:"left",sortable:!0},{name:"firstname",label:"Firstname",field:"firstname",align:"left",sortable:!0},{name:"lastname",label:"Lastname",field:"lastname",align:"left",sortable:!0},{name:"role",label:"Role",field:"role",align:"left",sortable:!0},{name:"action",label:"",field:"action",align:"left",sortable:!1}],pagination:{page:1,rowsPerPage:25,sortBy:"username"},rowsPerPageOptions:[{label:"25",value:25},{label:"50",value:50},{label:"100",value:100},{label:"All",value:0}],search:{username:"",firstname:"",lastname:"",role:""},customFilter:u["a"].customFilter,errors:{lastname:"",firstname:"",username:""},currentCollab:{lastname:"",firstname:"",username:"",role:""},idUpdate:"",roles:[]}},mounted:function(){this.getCollabs(),this.getRoles()},methods:{getCollabs:function(){var e=this;this.loading=!0,n["a"].getCollabs().then((function(t){e.collabs=t.data.datas,e.loading=!1})).catch((function(e){console.log(e)}))},createCollab:function(){var e=this;this.cleanErrors(),this.currentCollab.lastname||(this.errors.lastname="Lastname required"),this.currentCollab.firstname||(this.errors.firstname="Firstname required"),this.currentCollab.username||(this.errors.username="Username required"),this.currentCollab.password||(this.errors.password="Password required"),this.errors.lastname||this.errors.firstname||this.errors.username||this.errors.password||n["a"].createCollab(this.currentCollab).then((function(){e.getCollabs(),e.$refs.createModal.hide(),s["a"].create({message:"Collaborator created successfully",color:"positive",textColor:"white",position:"top-right"})})).catch((function(e){s["a"].create({message:e.response.data.datas,color:"negative",textColor:"white",position:"top-right"})}))},updateCollab:function(){var e=this;this.cleanErrors(),this.currentCollab.lastname||(this.errors.lastname="Lastname required"),this.currentCollab.firstname||(this.errors.firstname="Firstname required"),this.currentCollab.username||(this.errors.username="Username required"),this.errors.lastname||this.errors.firstname||this.errors.username||n["a"].updateCollab(this.idUpdate,this.currentCollab).then((function(){e.getCollabs(),e.$refs.editModal.hide(),s["a"].create({message:"Collaborator updated successfully",color:"positive",textColor:"white",position:"top-right"})})).catch((function(e){s["a"].create({message:e.response.data.datas,color:"negative",textColor:"white",position:"top-right"})}))},deleteCollab:function(e){var t=this;n["a"].deleteCollab(e).then((function(){t.getCollabs(),s["a"].create({message:"Collaborator deleted successfully",color:"positive",textColor:"white",position:"top-right"})})).catch((function(e){s["a"].create({message:e.response.data.datas,color:"negative",textColor:"white",position:"top-right"})}))},getRoles:function(){var e=this;c["a"].getRoles().then((function(t){e.roles=t.data.datas})).catch((function(e){console.log(e)}))},confirmDeleteCollab:function(e){var t=this;l["a"].create({title:"Confirm Suppression",message:"Collaborator «".concat(e.username,"» will be permanently deleted"),ok:{label:"Confirm",color:"negative"},cancel:{label:"Cancel",color:"white"}}).onOk((function(){return t.deleteCollab(e._id)}))},clone:function(e){this.currentCollab=this.$_.clone(e),this.idUpdate=e._id},cleanErrors:function(){this.errors.lastname="",this.errors.firstname="",this.errors.username="",this.errors.password=""},cleanCurrentCollab:function(){this.currentCollab.lastname="",this.currentCollab.firstname="",this.currentCollab.username="",this.currentCollab.role="user",this.currentCollab.password=""},dblClick:function(e,t){this.UserService.isAllowed("users:updates")&&(this.clone(t),this.$refs.editModal.show())}}},b=d,m=r("2877"),p=Object(m["a"])(b,a,o,!1,null,null,null);t["default"]=p.exports}}]);