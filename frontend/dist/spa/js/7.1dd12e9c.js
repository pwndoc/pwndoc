(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{"92eb":function(e,r,s){"use strict";s("fa1d")},c6f7:function(e,r,s){"use strict";s.r(r);var t=function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("div",{staticClass:"login-background",staticStyle:{height:"100vh",display:"flex"}},[!0===e.loaded?s("div",{staticStyle:{margin:"auto"}},[s("q-card",{staticClass:"bg-grey-1",staticStyle:{width:"350px"},attrs:{align:"center"}},[s("q-card-section",[s("q-img",{attrs:{src:"redteam.png"}})],1),e.errors.alert?s("q-card-section",[s("q-banner",{staticClass:"bg-red-4 text-white",attrs:{rounded:""}},[s("q-icon",{staticClass:"q-pr-sm",attrs:{name:"fa fa-exclamation-circle"}}),e._v("\n          "+e._s(e.errors.alert)+"\n        ")],1)],1):e._e(),e.init?s("div",[s("q-card-section",[s("q-input",{attrs:{label:"Username",error:!!e.errors.username,"error-message":e.errors.username,"hide-bottom-space":"",outlined:"","bg-color":"white",autofocus:"",for:"username"},on:{keyup:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.initUser()}},model:{value:e.username,callback:function(r){e.username=r},expression:"username"}})],1),s("q-card-section",[s("q-input",{attrs:{label:"Firstname",error:!!e.errors.firstname,"error-message":e.errors.firstname,"hide-bottom-space":"",outlined:"","bg-color":"white"},on:{keyup:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.initUser()}},model:{value:e.firstname,callback:function(r){e.firstname=r},expression:"firstname"}})],1),s("q-card-section",[s("q-input",{attrs:{label:"Lastname",error:!!e.errors.lastname,"error-message":e.errors.lastname,"hide-bottom-space":"",outlined:"","bg-color":"white"},on:{keyup:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.initUser()}},model:{value:e.lastname,callback:function(r){e.lastname=r},expression:"lastname"}})],1),s("q-card-section",[s("q-input",{attrs:{label:"Password",error:!!e.errors.password,"error-message":e.errors.password,"hide-bottom-space":"",outlined:"","bg-color":"white",type:"password",for:"password"},on:{keyup:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.initUser()}},model:{value:e.password,callback:function(r){e.password=r},expression:"password"}})],1),s("q-card-section",{attrs:{align:"center"}},[s("q-btn",{staticClass:"full-width",attrs:{color:"blue",unelevated:"","no-caps":""},on:{click:function(r){return e.initUser()}}},[e._v("Register First User")])],1)],1):s("div",[s("q-card-section",[s("q-input",{attrs:{label:"Username",error:!!e.errors.username,"error-message":e.errors.username,"hide-bottom-space":"",autofocus:"",outlined:"","bg-color":"white",for:"username"},on:{keyup:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.getToken()}},scopedSlots:e._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"fa fa-user"}})]},proxy:!0}],null,!1,3196854448),model:{value:e.username,callback:function(r){e.username=r},expression:"username"}})],1),s("q-card-section",[s("q-input",{attrs:{label:"Password",error:!!e.errors.password,"error-message":e.errors.password,"hide-bottom-space":"",outlined:"","bg-color":"white",for:"password",type:"password"},on:{keyup:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.getToken()}},scopedSlots:e._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"fa fa-key"}})]},proxy:!0}],null,!1,2146916342),model:{value:e.password,callback:function(r){e.password=r},expression:"password"}})],1),s("q-card-section",{attrs:{align:"center"}},[s("q-btn",{staticClass:"full-width",attrs:{color:"primary",unelevated:"","no-caps":""},on:{click:function(r){return e.getToken()}}},[e._v("Login")])],1)],1)],1)],1):e._e()])},n=[],a=s("f508"),o=s("93d6"),i={data:function(){return{init:!1,loaded:!1,username:"",firstname:"",lastname:"",password:"",errors:{alert:"",username:"",password:"",firstname:"",lastname:""}}},created:function(){this.$route.query.tokenError&&("2"===this.$route.query.tokenError?this.errors.alert="Expired token":this.errors.alert="Invalid token"),this.checkInit()},methods:{cleanErrors:function(){this.errors.alert="",this.errors.username="",this.errors.firstname="",this.errors.lastname="",this.errors.password=""},checkInit:function(){var e=this;a["a"].show({message:"<p>Trying to contact backend</p>",customClass:"loading",backgroundColor:"blue-grey-8"}),o["a"].isInit().then((function(r){a["a"].hide(),e.loaded=!0,e.init=r.data.datas})).catch((function(e){a["a"].show({message:"<i class='material-icons'>wifi_off</i><br /><p>Something went wrong contacting backend</p>",spinner:null,backgroundColor:"red-10",customClass:"loading-error"}),console.log(e)}))},initUser:function(){var e=this;this.cleanErrors(),this.username||(this.errors.username="Username required"),this.password||(this.errors.password="Password required"),this.firstname||(this.errors.firstname="Firstname required"),this.lastname||(this.errors.lastname="Lastname required"),this.errors.username||this.errors.password||this.errors.firstname||this.errors.lastname||o["a"].initUser(this.username,this.firstname,this.lastname,this.password).then((function(){e.$router.push("/")})).catch((function(r){console.log(r),e.errors.alert=r.response.data.datas}))},getToken:function(){var e=this;this.cleanErrors(),this.username||(this.errors.username="Username required"),this.password||(this.errors.password="Password required"),this.errors.username||this.errors.password||o["a"].getToken(this.username,this.password).then((function(){e.$router.push("/")})).catch((function(r){e.errors.alert="Invalid credentials"}))}}},c=i,l=(s("92eb"),s("2877")),u=s("f09f"),d=s("a370"),m=s("068f"),p=s("54e1"),f=s("0016"),h=s("27f9"),k=s("9c40"),w=s("eebe"),y=s.n(w),g=Object(l["a"])(c,t,n,!1,null,null,null);r["default"]=g.exports;y()(g,"components",{QCard:u["a"],QCardSection:d["a"],QImg:m["a"],QBanner:p["a"],QIcon:f["a"],QInput:h["a"],QBtn:k["a"]})},fa1d:function(e,r,s){}}]);